[gd_scene load_steps=9 format=3 uid="uid://c78861j2w5nrv"]

[ext_resource type="Theme" uid="uid://ccb43p0cholhl" path="res://assets/fonts/hud_theme.tres" id="1_xj1mb"]
[ext_resource type="Script" uid="uid://unjhlxsa5g8t" path="res://world/world_hud.gd" id="2_fbw4v"]
[ext_resource type="Texture2D" uid="uid://b5hxg47cxerx8" path="res://assets/Kenney/panelInset_brown.png" id="3_xj1mb"]
[ext_resource type="Theme" uid="uid://bu3qilx747ohm" path="res://assets/radial_menu.tres" id="4_0dsak"]
[ext_resource type="Texture2D" uid="uid://ds4ossxfmefjy" path="res://assets/icons/sun.svg" id="4_pfor0"]
[ext_resource type="Texture2D" uid="uid://vty4ppl1v3w0" path="res://assets/icons/hourglass.svg" id="5_0dsak"]
[ext_resource type="Theme" uid="uid://du1ir6iptoqui" path="res://assets/fungisland.tres" id="5_tymke"]

[sub_resource type="GDScript" id="GDScript_0tvjf"]
script/source = "extends Control

@onready var label: RichTextLabel = $Label
@onready var timer: Timer = $Timer

func show_inspection(text, stall = 2.0):
	label.text = text

	label.show()
	timer.start(stall)

func _on_timer_timeout() -> void:
	label.hide()
"

[node name="World HUD" type="Control"]
z_index = 5
texture_filter = 1
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 0
mouse_filter = 2
theme = ExtResource("1_xj1mb")
script = ExtResource("2_fbw4v")
metadata/_edit_use_anchors_ = true

[node name="Header" type="HBoxContainer" parent="."]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = -1
anchor_left = 0.02
anchor_top = 0.02
anchor_right = 0.217
anchor_bottom = 0.12

[node name="HeaderPanel" type="TextureRect" parent="Header"]
self_modulate = Color(1, 1, 1, 0.792157)
layout_mode = 2
size_flags_horizontal = 3
texture = ExtResource("3_xj1mb")

[node name="Stats" type="VBoxContainer" parent="Header/HeaderPanel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.102
anchor_top = 0.1
anchor_right = 1.0
anchor_bottom = 0.9
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 0

[node name="HFlowContainer" type="HFlowContainer" parent="Header/HeaderPanel/Stats"]
layout_mode = 2
size_flags_vertical = 6

[node name="TextureRect" type="TextureRect" parent="Header/HeaderPanel/Stats/HFlowContainer"]
layout_mode = 2
texture = ExtResource("4_pfor0")
expand_mode = 2

[node name="Resource" type="RichTextLabel" parent="Header/HeaderPanel/Stats/HFlowContainer"]
unique_name_in_owner = true
clip_contents = false
layout_mode = 2
size_flags_vertical = 3
theme = ExtResource("1_xj1mb")
bbcode_enabled = true
text = "100"
fit_content = true
scroll_active = false
autowrap_mode = 0
context_menu_enabled = true
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="HFlowContainer2" type="HFlowContainer" parent="Header/HeaderPanel/Stats"]
layout_mode = 2
size_flags_vertical = 6

[node name="TextureRect" type="TextureRect" parent="Header/HeaderPanel/Stats/HFlowContainer2"]
layout_mode = 2
texture = ExtResource("5_0dsak")
expand_mode = 2

[node name="TimeDisplay" type="RichTextLabel" parent="Header/HeaderPanel/Stats/HFlowContainer2"]
unique_name_in_owner = true
clip_contents = false
layout_mode = 2
size_flags_vertical = 3
text = "00:00
"
fit_content = true
scroll_active = false
autowrap_mode = 0
context_menu_enabled = true
vertical_alignment = 1
metadata/_edit_use_anchors_ = true

[node name="MessageContainer" type="HBoxContainer" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.3
anchor_right = 0.7
offset_left = -83.5
offset_top = 121.0
offset_right = 83.5
offset_bottom = 317.0
grow_horizontal = 2
size_flags_horizontal = 3
alignment = 1

[node name="Message" type="Control" parent="MessageContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = SubResource("GDScript_0tvjf")
metadata/_edit_use_anchors_ = true

[node name="Label" type="RichTextLabel" parent="MessageContainer/Message"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 3
theme = ExtResource("4_0dsak")
text = "Message goes here"
fit_content = true
scroll_active = false
autowrap_mode = 2
context_menu_enabled = true
horizontal_alignment = 1
vertical_alignment = 1
justification_flags = 160
metadata/_edit_use_anchors_ = true

[node name="Timer" type="Timer" parent="MessageContainer/Message"]
wait_time = 2.085
one_shot = true

[node name="GameOverScreen" type="VBoxContainer" parent="."]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 200.0
offset_bottom = -300.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
alignment = 1

[node name="GameOver" type="Label" parent="GameOverScreen"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.65
theme = ExtResource("5_tymke")
text = "Game Over!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="FinalTime" type="Label" parent="GameOverScreen"]
layout_mode = 2
theme = ExtResource("4_0dsak")
text = "00:00"
horizontal_alignment = 1

[node name="FinalMessage" type="Label" parent="GameOverScreen"]
custom_minimum_size = Vector2(0, 200)
layout_mode = 2
size_flags_vertical = 3
theme = ExtResource("4_0dsak")
text = "Try to beat your score next time."
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="Controls" type="HBoxContainer" parent="."]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.15
anchor_top = 0.98
anchor_right = 0.85
anchor_bottom = 0.987
offset_left = -106.5
offset_top = -40.0
offset_right = 106.5
grow_vertical = 2
mouse_filter = 0
alignment = 1

[node name="BackToStartScreen" type="Button" parent="Controls"]
layout_mode = 2
size_flags_horizontal = 3
text = "Back"

[node name="Refresh" type="Button" parent="Controls"]
layout_mode = 2
size_flags_horizontal = 3
text = "Refresh"

[node name="ResetData" type="Button" parent="Controls"]
layout_mode = 2
size_flags_horizontal = 3
text = "Reset Data"

[node name="AddEnergy" type="Button" parent="Controls"]
layout_mode = 2
size_flags_horizontal = 3
text = "Add Energy"

[node name="NextLevel" type="Button" parent="Controls"]
layout_mode = 2
size_flags_horizontal = 3
text = "Next Level"

[node name="TickTimer" type="Timer" parent="."]
unique_name_in_owner = true
autostart = true

[connection signal="timeout" from="MessageContainer/Message/Timer" to="MessageContainer/Message" method="_on_timer_timeout"]
[connection signal="pressed" from="Controls/BackToStartScreen" to="." method="_on_back_to_start_screen_pressed"]
[connection signal="pressed" from="Controls/Refresh" to="." method="_on_refresh_pressed"]
[connection signal="pressed" from="Controls/ResetData" to="." method="_on_reset_data_pressed"]
[connection signal="pressed" from="Controls/AddEnergy" to="." method="_on_add_energy_pressed"]
[connection signal="button_down" from="Controls/NextLevel" to="." method="_on_next_level_button_down"]
